<div class="product-panel-bg">
  <div class="product-panel">
    <h1><strong><a href="admin/dashboard">Admin Dashboard</a> - Product List</strong></h1>
    <div class="filter-container">
      <p>Filter by: </p>
      <mat-form-field appearance="outline">
        <mat-select [(ngModel)]="filter" (ngModelChange)="filterProducts()">
          <mat-option [value]=0>All</mat-option>
          <mat-option [value]=1>Approved</mat-option>
          <mat-option [value]=2>Unapproved</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div *ngFor="let product of products">
      <mat-card>
        <mat-card-header>
          <mat-card-title>
            <a href="product/{{product.productId}}">{{product.title}} ({{(product.type == 0 ? 'Item' : 'Service')}})</a>
          </mat-card-title>
          <mat-card-subtitle>
            {{product.price.toLocaleString('en-US', { style: 'currency', currency: 'USD' })}}
            <div *ngIf="product.priceKind !== 0">{{(product.priceKind == 1) ? 'per hour' : 'per day'}}</div><br>
            <p>{{product.approved ? 'Approved' : 'Not Approved'}}</p>
          </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <mat-accordion multi>
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                Description:
              </mat-expansion-panel-header>
              <p>{{product.description}}</p>
            </mat-expansion-panel>
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                Additional Info:
              </mat-expansion-panel-header>
              <p>
                Location: {{product.location}}<br>
                Status: {{(product.status) ? 'available' : 'not available'}}<br>
                Deliverable: {{(product.deliverable) ? 'yes' : 'no'}}<br>
                {{(product.sellOrLend === 0) ? 'to sell' : 'to lend'}}
              </p>
            </mat-expansion-panel>
          </mat-accordion>
        </mat-card-content>
        <mat-card-actions>
          <button *ngIf="!product.approved" mat-stroked-button class="black-btn" (click)="approveProduct(product.productId)">APPROVE</button>
          <button mat-stroked-button class="black-btn" (click)="deleteProduct(product)">DELETE</button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
</div>
